<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CSS Cube Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #0a0a0f;
      --panel: rgba(255,255,255,0.06);
      --muted: rgba(255,255,255,0.14);
    }

    html, body {
      height: 100%;
      background: var(--bg);
      color: #fff;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .wrap {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1200px;
      gap: 40px;
      padding: 40px;
    }

    /* Scene / cube */
    .scene {
      width: 360px;
      height: 360px;
      position: relative;
      transform-style: preserve-3d;
      touch-action: none;
      user-select: none;
    }

    .cube {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transform: translateZ(-180px) rotateX(-10deg);
      transition: transform 500ms cubic-bezier(.2,.9,.3,1);
      will-change: transform;
    }

    .face {
      position: absolute;
      width: 360px;
      height: 360px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 20px;
      color: #eaf6ff;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 6px 18px rgba(2,6,23,0.6);
      backface-visibility: hidden;
      cursor: pointer;
      overflow: hidden;
    }

    .face .thumb {
      position: absolute;
      left: 16px;
      top: 16px;
      right: 16px;
      height: 68%;
      background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255,255,255,0.6);
      font-weight: 600;
      font-size: 18px;
      border-radius: 8px;
    }

    .face h3 {
      margin: 0 0 6px 0;
      font-size: 22px;
      line-height: 1;
      letter-spacing: -0.2px;
    }

    .face p {
      margin: 0 0 6px 0;
      font-size: 13px;
      opacity: 0.88;
      color: rgba(230,238,246,0.9);
    }

    .meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 6px;
      font-size: 12px;
      color: rgba(200,220,240,0.8);
    }

    .index {
      color: #9fc8f0;
      font-weight: 700;
    }

    /* Face positions */
    .front  { transform: rotateY(  0deg) translateZ(180px); background: linear-gradient(180deg,#0d1b2a, rgba(13,27,42,0.15)); }
    .back   { transform: rotateY(180deg) translateZ(180px); background: linear-gradient(180deg,#10221a, rgba(10,34,26,0.15)); }
    .right  { transform: rotateY( 90deg) translateZ(180px); background: linear-gradient(180deg,#0a1330, rgba(10,19,48,0.14)); }
    .left   { transform: rotateY(-90deg) translateZ(180px); background: linear-gradient(180deg,#2a0f21, rgba(42,15,33,0.12)); }
    .top    { transform: rotateX( 90deg) translateZ(180px); background: linear-gradient(180deg,#13202b, rgba(19,32,43,0.12)); justify-content: center; align-items: center; }
    .bottom { transform: rotateX(-90deg) translateZ(180px); background: linear-gradient(180deg,#1b1420, rgba(27,20,32,0.12)); justify-content: center; align-items: center; }

    .face:hover { transform: translateZ(0) scale(1.01); box-shadow: 0 10px 28px rgba(2,6,23,0.7); }

    /* Rod visual */
    .rod {
      width: 6px;
      height: 620px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      border-radius: 4px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 0;
      opacity: 0.9;
    }

    /* Bento grid area (cards around cube) */
    .bento {
      width: 420px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-content: start;
    }

    .card {
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
      padding: 12px;
      display: flex;
      gap: 10px;
      align-items: flex-start;
      border: 1px solid rgba(255,255,255,0.04);
      transition: transform 220ms ease, box-shadow 220ms ease;
      cursor: pointer;
    }

    .card:hover { transform: translateY(-6px); box-shadow: 0 14px 36px rgba(2,6,23,0.6); }

    .card .thumb {
      width: 84px;
      height: 64px;
      border-radius: 8px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: rgba(255,255,255,0.85);
    }

    .card h4 { margin: 0; font-size: 15px; }
    .card p { margin: 2px 0 0 0; font-size: 12px; color: rgba(230,238,246,0.8); }

    .hint {
      position: fixed;
      left: 20px;
      bottom: 18px;
      font-size: 13px;
      color: rgba(220,235,255,0.75);
      opacity: 0.9;
    }

    /* Make layout responsive */
    @media (max-width: 920px) {
      .wrap { flex-direction: column; gap: 22px; padding: 20px; }
      .bento { width: min(92vw, 720px); grid-template-columns: repeat(2, 1fr); }
      .scene { width: 320px; height: 320px; }
      .face { width: 320px; height: 320px; }
      .cube { transform: translateZ(-160px) rotateX(-10deg); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div style="position:relative;">
      <div class="rod" aria-hidden="true"></div>
      <div class="scene" id="scene" role="application" aria-label="3D project cube">
        <div class="cube" id="cube">
          <div class="face front" data-slot="front" data-url="/PolyWeave-Mines/">
            <div class="thumb">Minesweeper (thumb)</div>
            <div style="position:relative; z-index:2;">
              <h3>Minesweeper</h3>
              <p>Interactive tile-based puzzle</p>
              <div class="meta"><span class="index">#1</span><span>View project</span></div>
            </div>
          </div>

          <div class="face right" data-slot="right" data-url="#">
            <div class="thumb">Proj 3</div>
            <div style="position:relative; z-index:2;">
              <h3>Project 3</h3>
              <p>Exploratory demo</p>
              <div class="meta"><span class="index">#3</span><span>Coming soon</span></div>
            </div>
          </div>

          <div class="face back" data-slot="back" data-url="#">
            <div class="thumb">Proj 2</div>
            <div style="position:relative; z-index:2;">
              <h3>Project 2</h3>
              <p>Utility tool</p>
              <div class="meta"><span class="index">#2</span><span>Details</span></div>
            </div>
          </div>

          <div class="face left" data-slot="left" data-url="#">
            <div class="thumb">Proj 4</div>
            <div style="position:relative; z-index:2;">
              <h3>Project 4</h3>
              <p>Algorithmic art</p>
              <div class="meta"><span class="index">#4</span><span>Details</span></div>
            </div>
          </div>

          <div class="face top" data-slot="top" aria-hidden="true">
            <div style="text-align:center;">
              <h3>Welcome</h3>
              <p>Drag horizontally to rotate</p>
            </div>
          </div>

          <div class="face bottom" data-slot="bottom" aria-hidden="true">
            <div style="text-align:center;">
              <h3>More</h3>
              <p>See more projects below</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="bento" aria-hidden="false">
      <div class="card" data-proj="0">
        <div class="thumb">#1</div>
        <div>
          <h4>Minesweeper</h4>
          <p>Interactive tile-based puzzle — click to open</p>
        </div>
      </div>
      <div class="card" data-proj="1">
        <div class="thumb">#2</div>
        <div>
          <h4>Project 2</h4>
          <p>Utility tool — coming soon</p>
        </div>
      </div>
      <div class="card" data-proj="2">
        <div class="thumb">#3</div>
        <div>
          <h4>Project 3</h4>
          <p>Exploratory demo</p>
        </div>
      </div>
      <div class="card" data-proj="3">
        <div class="thumb">#4</div>
        <div>
          <h4>Project 4</h4>
          <p>Algorithmic art</p>
        </div>
      </div>
      <div class="card" data-proj="4">
        <div class="thumb">#5</div>
        <div>
          <h4>Project 5</h4>
          <p>Placeholder</p>
        </div>
      </div>
      <div class="card" data-proj="5">
        <div class="thumb">#6</div>
        <div>
          <h4>Project 6</h4>
          <p>Placeholder</p>
        </div>
      </div>
    </div>
  </div>

  <div class="hint">Drag the cube horizontally; click faces or cards to open</div>

  <script>
    // Simple CSS-cube horizontal rotation with drag (cumulative drag) and click-vs-drag detection.
    // Clicking a face opens its URL; dragging rotates the cube without accidental inversion.
    (function () {
      const scene = document.getElementById('scene');
      const cube = document.getElementById('cube');
      const faces = Array.from(cube.querySelectorAll('.face'));
      const cards = Array.from(document.querySelectorAll('.card'));

      const SENSITIVITY = 0.35; // degrees per 1 px (adjust for feel)
      const CLICK_MOVE_THRESHOLD = 6; // px
      const CLICK_TIME_THRESHOLD = 300; // ms

      let isPointerDown = false;
      let startX = 0;
      let startY = 0;
      let startRotY = 0;
      let pointerDownAt = 0;
      let angVel = 0;

      // track logical rotation in degrees around Y
      let rotY = 0;

      // helper: set CSS transform using degrees
      function applyRotation(degY) {
        rotY = degY;
        cube.style.transform = `translateZ(-180px) rotateX(-10deg) rotateY(${degY}deg)`;
      }

      // initialize to front
      applyRotation(0);

      // pointer events
      scene.addEventListener('pointerdown', (e) => {
        isPointerDown = true;
        startX = e.clientX;
        startY = e.clientY;
        startRotY = rotY;
        pointerDownAt = performance.now();
        angVel = 0;
        scene.setPointerCapture(e.pointerId);
      });

      scene.addEventListener('pointermove', (e) => {
        if (!isPointerDown) return;
        const dx = e.clientX - startX;
        const target = startRotY + dx * SENSITIVITY;
        // angular velocity for inertia
        angVel = target - rotY;
        applyRotation(target);
      });

      scene.addEventListener('pointerup', (e) => {
        const dt = performance.now() - pointerDownAt;
        const moved = Math.hypot(e.clientX - startX, e.clientY - startY);
        const isClick = moved <= CLICK_MOVE_THRESHOLD && dt <= CLICK_TIME_THRESHOLD;
        isPointerDown = false;
        try { scene.releasePointerCapture(e.pointerId); } catch (err) {}

        // clamp angVel so inertia is reasonable
        angVel = Math.max(-8, Math.min(8, angVel));

        if (isClick) {
          // find clicked face via elementFromPoint (works reliably for CSS cube)
          const el = document.elementFromPoint(e.clientX, e.clientY);
          const faceEl = el && el.closest && el.closest('.face');
          if (faceEl) {
            const url = faceEl.getAttribute('data-url');
            if (url && url !== '#') window.open(url, '_blank');
          }
        }
      });

      // basic inertia loop
      let last = performance.now();
      function tick(now) {
        const dt = (now - last) / 1000;
        last = now;

        // apply inertia
        if (!isPointerDown && Math.abs(angVel) > 0.0005) {
          applyRotation(rotY + angVel);
          // damping
          angVel *= Math.pow(0.92, dt * 60);
        } else {
          angVel = 0;
        }

        requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);

      // clicking cards centers the cube to that project's face
      function normalizeAngle(a) {
        // bring into [-180, 180)
        let v = ((a + 180) % 360) - 180;
        return v;
      }

      // map slots to degrees: front=0, right=-90, back=180, left=90
      const slotToDeg = { front: 0, right: -90, back: 180, left: 90 };

      function centerOnSlot(slotName) {
        const deg = slotToDeg[slotName] || 0;
        // find nearest equivalent angle to current rotY to avoid long spin
        const current = rotY;
        // candidate angles: deg + k*360, pick one nearest current
        let best = deg;
        let minDiff = Math.abs(normalizeAngle(best - current));
        for (let k = -1; k <= 1; k++) {
          const cand = deg + k * 360;
          const diff = Math.abs(normalizeAngle(cand - current));
          if (diff < minDiff) { best = cand; minDiff = diff; }
        }
        // animate smoothly
        const duration = 420;
        const start = performance.now();
        const from = current;
        const to = best;
        function animateStep(ts) {
          const t = Math.min(1, (ts - start) / duration);
          const eased = 1 - Math.pow(1 - t, 3);
          const cur = from + (to - from) * eased;
          applyRotation(cur);
          if (t < 1) requestAnimationFrame(animateStep);
        }
        requestAnimationFrame(animateStep);
      }

      // card clicks map to project index -> slot
      cards.forEach(card => {
        card.addEventListener('click', () => {
          const idx = Number(card.getAttribute('data-proj') || 0);
          // map index -> slot around cube so that project 0 is front, 1 is right, 2 back, 3 left, 4 front (cycled)
          const slotIndex = idx % 4; // 0..3
          const slotNames = ['front', 'right', 'back', 'left'];
          centerOnSlot(slotNames[slotIndex]);
        });
      });

      // face clicks open url (separate listener to ensure click vs drag already handled)
      faces.forEach(face => {
        face.addEventListener('click', (e) => {
          // if it was part of drag, event won't be considered a click by pointer logic above
          const url = face.getAttribute('data-url');
          if (url && url !== '#') window.open(url, '_blank');
        });
      });

      // keyboard shortcuts: left/right to rotate
      window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft' || e.key === 'a') centerOnSlot('left');
        else if (e.key === 'ArrowRight' || e.key === 'd') centerOnSlot('right');
      });
    })();
  </script>
</body>
</html>
